{% extends 'layout.html' %}

{% block content %}
    {% for message in get_flashed_messages() %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}    
    {% if current_user.id == name_to_update.id or current_user.username == "admin"  %}
    <br>
    <h2>Edit User Profile</h2>
    <br>
    <form action="/update/{{ name_to_update.id }}"method="POST">
        <div class="shadow p-3 mb-5 bg-body rounded">
        {{ form.hidden_tag() }}
        {{ form.name.label(class="form-label theme_text") }}
        {{ form.name(class="form-control", value=name_to_update.name) }}
        <br>
        {{ form.hidden_tag() }}
        {{ form.username.label(class="form-label theme_text") }}
        {{ form.username(class="form-control", value=name_to_update.username) }}
        <br>
        {{ form.hidden_tag() }}
        {{ form.email.label(class="form-label theme_text") }}
        {{ form.email(class="form-control", value=name_to_update.email) }}
        <br>
        {{ form.submit(class="btn btn-dark theme button")}}
        </div>
    </form>
    {% else %}<br>
    <h1 class="theme_text">Access Denied!</h1>
    <br>
    
    <h3 class="theme_text">Sorry, you cannot edit this user.</h2>
    {% endif %}
    <br>
{% endblock %}
